╔════════════════════════════════════════════════════════════════════════════════╗
║              PFERDEWERT.DE BUNDLE ANALYZER - QUICK REFERENCE                  ║
║                        November 16, 2025                                       ║
╚════════════════════════════════════════════════════════════════════════════════╝

BUNDLE SNAPSHOT
═════════════════════════════════════════════════════════════════════════════════

Total Size:        2.59 MB
Health Score:      7/10
Status:            GOOD (with optimization opportunities)

┌─ COMPOSITION ─────────────────────────────────────────────────────────────────┐
│                                                                                │
│  1.16 MB ████████████████████████████████████ Vendor (45%)                    │
│          - React ecosystem (~350 KB)                                           │
│          - Next.js (~280 KB)                                                  │
│          - OpenAI SDK (~140 KB) ⚠ UNUSED ON MOST PAGES                        │
│          - MongoDB (~150 KB) ⚠ SHOULDN'T BE CLIENT-SIDE                       │
│          - Others (~200 KB)                                                   │
│                                                                                │
│  720 KB  ███████████████████████ React-PDF (28%) ✓ LAZY-LOADED                │
│                                                                                │
│  550 KB  ██████████████████ Ratgeber Pages (21%) ⚠ DUPLICATION                │
│          - 9 pages sharing components                                         │
│                                                                                │
│  182 KB  ██████ Icons & Others (7%)                                           │
│          - Lucide icons: 31 unique icons, good deduplication                  │
│          - Common chunk: 41 KB ✓ GOOD SIZE                                    │
│                                                                                │
└─────────────────────────────────────────────────────────────────────────────────┘


TOP OPTIMIZATION TARGETS
═════════════════════════════════════════════════════════════════════════════════

1. OPENAI SDK (140 KB) ⚠⚠⚠
   Location:     Vendor chunk
   Used On:      Evaluation pages only
   Fix:          Dynamic import
   Impact:       -80 to 120 KB
   Effort:       2-3 hours
   Status:       HIGH PRIORITY

2. RATGEBER LAYOUTS (550+ KB combined)
   Issue:        9 pages with duplicated components
   Fix:          Extract common layouts
   Impact:       -100 to 150 KB
   Effort:       4-6 hours
   Status:       MEDIUM PRIORITY

3. MONGODB CLIENT (150 KB) ⚠⚠
   Location:     Vendor chunk
   Issue:        Clients don't need DB driver
   Fix:          Move to API routes only
   Impact:       -50 to 80 KB
   Effort:       3-4 hours (architecture change)
   Status:       HIGH PRIORITY (complex)

4. LUCIDE ICONS (60 KB)
   Issue:        Minor import duplication
   Fix:          Create icon barrel export
   Impact:       -5 to 10 KB
   Effort:       1 hour
   Status:       QUICK WIN


LUCIDE ICONS DETAIL
═════════════════════════════════════════════════════════════════════════════════

Used Across:       6 files only (good modularization)
Unique Icons:      31 icons
Bundle Impact:     ~60 KB
Tree-shaking:      ✓ YES (Next.js bundler)

Most Used:
  • ChevronDown     (5+ imports)
  • Clock           (5+ imports)
  • ArrowRight      (4+ imports)
  • CheckCircle     (4+ imports)
  • Star            (3+ imports)

Recommendation:    Create @/components/icons/index.ts barrel
Expected Gain:     -5 to 10 KB (better bundler efficiency)


WHAT'S WORKING WELL
═════════════════════════════════════════════════════════════════════════════════

✓ React-PDF Optimization
  - 720 KB chunk is properly lazy-loaded
  - Not in initial bundle
  - Only loaded when user generates PDF
  - Excellent implementation!

✓ Modular Page Structure
  - Ratgeber pages split across 9 chunks
  - Better than monolithic bundle
  - Allows per-page loading

✓ Icon Usage
  - Only 31 unique icons (reasonable)
  - Properly tree-shaken
  - Good file organization

✓ Minimal Dependencies
  - No bloated UI libraries
  - Focused tech stack
  - Good dependency choices


OPTIMIZATION PHASES
═════════════════════════════════════════════════════════════════════════════════

PHASE 1: Quick Wins (1 week, 4-5 hours)
  └─ Impact: -45 to 70 KB (1.7-2.7%)
    • Icon barrel export (1h, -5 to 10 KB)
    • Replace 'micro' (1h, -10 KB)
    • Code split Zod (2-3h, -30 to 50 KB)

PHASE 2: Medium Effort (2-3 weeks, 6-8 hours)
  └─ Impact: -140 to 220 KB (5.4-8.5%)
    • Lazy load OpenAI (2-3h, -80 to 120 KB)
    • Common ratgeber layouts (3-4h, -50 to 80 KB)
    • Route-based code splitting (1-2h, -10 to 20 KB)

PHASE 3: Major Refactoring (Month 2, 8-10 hours)
  └─ Impact: -120 to 200 KB (4.6-7.7%)
    • MongoDB API-only (4-5h, -50 to 80 KB)
    • Lazy load below-fold (3-4h, -50 to 80 KB)
    • Dynamic Stripe import (1-2h, -20 to 40 KB)

TOTAL POTENTIAL: -275 to 550 KB (10-21% reduction)
TARGET: 2.0-2.3 MB


FINAL METRICS
═════════════════════════════════════════════════════════════════════════════════

Current:           2.59 MB (100%)
After Phase 1:     2.54 MB (98.3%)
After Phase 2:     2.37 MB (91.5%)
After Phase 3:     2.15 MB (83%)

Performance Gains:
  • Initial load improvement: ~200-300ms faster
  • Mobile JavaScript parsing: ~15% reduction
  • Core Web Vitals: Better LCP (Largest Contentful Paint)


ACTION ITEMS
═════════════════════════════════════════════════════════════════════════════════

IMMEDIATE (Next Sprint):
  [ ] Review report with team
  [ ] Prioritize optimization phases
  [ ] Create GitHub issues for Phase 1
  [ ] Assign icon barrel task (easy win)

SHORT-TERM (2-3 weeks):
  [ ] Implement Phase 1 optimizations
  [ ] Start Phase 2 planning
  [ ] Set up bundle size monitoring

MEDIUM-TERM (Month 2):
  [ ] Complete Phase 2
  [ ] Begin Phase 3 refactoring
  [ ] Monitor performance improvements

ONGOING:
  [ ] Monthly bundle size review
  [ ] Track Core Web Vitals
  [ ] Review new dependencies before adding

═════════════════════════════════════════════════════════════════════════════════

Report Location: /Users/benjaminreder/Developer/pferdewert/BUNDLE_ANALYSIS_REPORT.md
Screenshot:      /Users/benjaminreder/Developer/pferdewert/.playwright-mcp/bundle-analyzer-report.png

